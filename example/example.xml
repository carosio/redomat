<?xml version="1.0" encoding="UTF-8"?>
<redo>

	<layer_declaration>
		<remote name="github" baseurl="git://github.com/travelping" />
		<baselayer remote="github" revision="deadbeef" repo="hello_world.git" />
		<layer name="hello_world" remote="github" revision="deadbeef" repo="hello_world.git" />
	</layer_declaration>

	<local_conf>
		<MACHINE>vmware</MACHINE>
		<DISTRO>helloworld</DISTRO>
	</local_conf>

	<buildstage id="001-ubuntu">
		<action>FROM ubuntu:14.04</action>
		<action>RUN apt-get update</action>
		<action>RUN apt-get install -y gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential chrpath libsdl1.2-dev vim sudo curl webfs</action>
		<action>RUN mkdir /REDO</action>
		<action>RUN mkdir /REDO/build</action>
		<action>RUN mkdir /REDO/source</action>
		<!-- FIXME actually redomat should do this kind of preparation without any need for declaration -->
	</buildstage>

	<buildstage id="002-hello-world">
		<prestage>001-ubuntu</prestage>
		<action>WORKDIR /REDO/source</action>
		<action>ADD hello-world.txt /REDO/source/hello-world.txt</action>
		<action>RUN cp -v hello-world.txt foobar.txt</action>
	</buildstage>

</redo>
